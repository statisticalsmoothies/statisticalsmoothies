<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Giacomo Biganzoli &amp; Prof.ssa Patrizia Boracchi">

<title>Statistica Applicata alla Ricerca Biomedica - R - Statistica descrittiva e basi di R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="logo.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Statistica Applicata alla Ricerca Biomedica - R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../Stat descrittiva.qmd" rel="" target="">
 <span class="menu-text">Statistica descrittiva</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#la-rilevazione-delle-variabili" id="toc-la-rilevazione-delle-variabili" class="nav-link active" data-scroll-target="#la-rilevazione-delle-variabili"><strong>La rilevazione delle variabili</strong></a></li>
  <li><a href="#lo-studio-clinico" id="toc-lo-studio-clinico" class="nav-link" data-scroll-target="#lo-studio-clinico"><strong>Lo studio clinico</strong></a></li>
  <li><a href="#tipologia-delle-variabili" id="toc-tipologia-delle-variabili" class="nav-link" data-scroll-target="#tipologia-delle-variabili">Tipologia delle variabili</a></li>
  <li><a href="#utilità-della-statistica-descrittiva" id="toc-utilità-della-statistica-descrittiva" class="nav-link" data-scroll-target="#utilità-della-statistica-descrittiva">Utilità della statistica descrittiva</a></li>
  <li><a href="#utilità-della-statistica-descrittiva-1" id="toc-utilità-della-statistica-descrittiva-1" class="nav-link" data-scroll-target="#utilità-della-statistica-descrittiva-1">Utilità della statistica descrittiva</a></li>
  <li><a href="#table-1" id="toc-table-1" class="nav-link" data-scroll-target="#table-1">Table 1</a></li>
  <li><a href="#indici-di-tendenza-centrale" id="toc-indici-di-tendenza-centrale" class="nav-link" data-scroll-target="#indici-di-tendenza-centrale">Indici di tendenza centrale</a></li>
  <li><a href="#le-misure-di-dispersione-attorno-alla-media" id="toc-le-misure-di-dispersione-attorno-alla-media" class="nav-link" data-scroll-target="#le-misure-di-dispersione-attorno-alla-media">Le misure di dispersione attorno alla media</a></li>
  <li><a href="#per-valutare-se-le-distribuzioni-sono-asimmeriche-è-necessario-analizzarle-ad-esempio-rappresentarle-graficamente" id="toc-per-valutare-se-le-distribuzioni-sono-asimmeriche-è-necessario-analizzarle-ad-esempio-rappresentarle-graficamente" class="nav-link" data-scroll-target="#per-valutare-se-le-distribuzioni-sono-asimmeriche-è-necessario-analizzarle-ad-esempio-rappresentarle-graficamente">Per valutare se le distribuzioni sono asimmeriche è necessario analizzarle, ad esempio rappresentarle graficamente</a></li>
  <li><a href="#altre-misure-di-tendenza-centrale" id="toc-altre-misure-di-tendenza-centrale" class="nav-link" data-scroll-target="#altre-misure-di-tendenza-centrale">Altre misure di tendenza centrale</a></li>
  <li><a href="#altre-misure-di-tendenza-centrale-1" id="toc-altre-misure-di-tendenza-centrale-1" class="nav-link" data-scroll-target="#altre-misure-di-tendenza-centrale-1">Altre misure di tendenza centrale</a></li>
  <li><a href="#sintesi-numerica-dei-dati-le-misure-di-dispersione-attorno-alla-mediana-campo-di-variazione-interquartile" id="toc-sintesi-numerica-dei-dati-le-misure-di-dispersione-attorno-alla-mediana-campo-di-variazione-interquartile" class="nav-link" data-scroll-target="#sintesi-numerica-dei-dati-le-misure-di-dispersione-attorno-alla-mediana-campo-di-variazione-interquartile">Sintesi numerica dei dati: le misure di dispersione attorno alla mediana campo di variazione interquartile</a></li>
  <li><a href="#mediana-e-quartili-per-descrivere-graficamente-le-distribuzioni-il-box-plot" id="toc-mediana-e-quartili-per-descrivere-graficamente-le-distribuzioni-il-box-plot" class="nav-link" data-scroll-target="#mediana-e-quartili-per-descrivere-graficamente-le-distribuzioni-il-box-plot">Mediana e quartili per descrivere graficamente le distribuzioni: il ‘’box-plot’’</a></li>
  <li><a href="#le-funzioni-di-distribuzione-cumulata-per-il-confronto-tra-distribuzioni" id="toc-le-funzioni-di-distribuzione-cumulata-per-il-confronto-tra-distribuzioni" class="nav-link" data-scroll-target="#le-funzioni-di-distribuzione-cumulata-per-il-confronto-tra-distribuzioni">Le funzioni di distribuzione cumulata per il confronto tra distribuzioni</a></li>
  <li><a href="#installazione-di-r" id="toc-installazione-di-r" class="nav-link" data-scroll-target="#installazione-di-r">Installazione di R</a>
  <ul class="collapse">
  <li><a href="#se-non-avete-ancora-installato-r" id="toc-se-non-avete-ancora-installato-r" class="nav-link" data-scroll-target="#se-non-avete-ancora-installato-r">Se non avete ancora installato R</a></li>
  <li><a href="#avete-installato-r" id="toc-avete-installato-r" class="nav-link" data-scroll-target="#avete-installato-r">Avete installato R</a></li>
  </ul></li>
  <li><a href="#installare-rstudio" id="toc-installare-rstudio" class="nav-link" data-scroll-target="#installare-rstudio">Installare RStudio</a></li>
  <li><a href="#non-esitare-a-contattarmi-per-evenutali-domande-eo-problemi-di-installazione" id="toc-non-esitare-a-contattarmi-per-evenutali-domande-eo-problemi-di-installazione" class="nav-link" data-scroll-target="#non-esitare-a-contattarmi-per-evenutali-domande-eo-problemi-di-installazione">📧 Non esitare a contattarmi per evenutali domande e/o problemi di installazione!📧</a></li>
  <li><a href="#introduzione-al-linguaggio-di-r" id="toc-introduzione-al-linguaggio-di-r" class="nav-link" data-scroll-target="#introduzione-al-linguaggio-di-r">Introduzione al linguaggio di R</a>
  <ul class="collapse">
  <li><a href="#script-oggetti-e-funzioni" id="toc-script-oggetti-e-funzioni" class="nav-link" data-scroll-target="#script-oggetti-e-funzioni">Script: oggetti e funzioni</a></li>
  </ul></li>
  <li><a href="#caricare-i-dati-su-r" id="toc-caricare-i-dati-su-r" class="nav-link" data-scroll-target="#caricare-i-dati-su-r">Caricare i dati su R</a></li>
  <li><a href="#controllo-congruenza-dati" id="toc-controllo-congruenza-dati" class="nav-link" data-scroll-target="#controllo-congruenza-dati">Controllo congruenza dati</a></li>
  <li><a href="#homework" id="toc-homework" class="nav-link" data-scroll-target="#homework">Homework 📚</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Statistica descrittiva e basi di R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Giacomo Biganzoli &amp; Prof.ssa Patrizia Boracchi </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="la-rilevazione-delle-variabili" class="level2">
<h2 class="anchored" data-anchor-id="la-rilevazione-delle-variabili"><strong>La rilevazione delle variabili</strong></h2>
<ul>
<li><p>Dopo aver definito gli obiettivi dello studio si deve pianificare la raccolta delle variabili in modo tale da valutare correttamente il raggiungimento degli obiettivi e di caratterizzare il campione in studio.</p></li>
<li><p>Variabili legate alla valutazione dello stato di salute del soggetto.</p></li>
<li><p>Se è prevista una terapia: variabili legate alle modalità di somministrazione, eventuali modifiche di dosaggio, rilevazione di effetti collaterali, efficacia.</p></li>
<li><p>Variabili che potenzialmente potrebbero influenzare lo stato di salute e/o l’efficacia della terapia.</p></li>
<li><p>Altre variabili che caratterizzano il soggetto ‘’clinicamente’’ e ‘’demograficamente’’.</p></li>
</ul>
</section>
<section id="lo-studio-clinico" class="level2">
<h2 class="anchored" data-anchor-id="lo-studio-clinico"><strong>Lo studio clinico</strong></h2>
<p>Dati dall’<a href="https://pubmed.ncbi.nlm.nih.gov/29699952/">articolo <em>Associations of vitamin D status with markers of metabolic health: A community-based study in Shanghai, China</em></a></p>
<blockquote class="blockquote">
<p>Vitamin D is a hormone that has long been related to bone metabolism. Recent evidence, however, has suggested links between lower vitamin D status and higher susceptibility for type 2 diabetes (T2DM) dyslipidemia, hypertension and obesity, all of which are major components of metabolic syndrome (MS).</p>
<p><strong>Aims</strong>: To investigated the associations of vitamin D status (i.e., serum 25(OH)D concentration) with markers of metabolic health and metabolic syndrome (MS), as well as possible gender differences in these associations, with metabolic syndrome (MS) for a sample from Shanghai, China.</p>
<p><strong>Methods</strong>: Demographic and anthropometric data, as well as 25-hydroxyvitamin D (serum 25(OH)D), blood glucose, and lipid concentrations were obtained for 508 urban residents aged 19–70 years.</p>
</blockquote>
<p>Quali tra le seguenti caratteristiche sono associate alla presenza di sindrome metabolica?</p>
<ul>
<li><p>Vitamin D status : (ng/mL)</p></li>
<li><p>Age (years)</p></li>
<li><p>Gender (M/F)</p></li>
<li><p>lifestyle: current smokers(yes/no); Alcohol use (yes/no); Sleep Duration (hours/day); Outdoor PA (hours/week)</p></li>
</ul>
</section>
<section id="tipologia-delle-variabili" class="level2 p">
<h2 class="p anchored" data-anchor-id="tipologia-delle-variabili">Tipologia delle variabili</h2>
<p>La modalità di rilevazione delle variabili indicate definisce la loro tipologia</p>
<ul>
<li>Sindrome metabolica, Genere, abitudine al fumo, consumo abituale di alcool sono variabili che necessitano della definizione a priori di «categorie» entro le quali classificare la rilevazionead ogni soggetto nel momento della rilevazione è associata una ed una sola categoria</li>
</ul>
<blockquote class="blockquote">
<p>Genere: M/F abitudine al fumo (si/no); consumo abituale di alcool (si/no); Presenza di sindrome metabolica (si/no).</p>
</blockquote>
<ul>
<li>Ore di sonno, ore di attività fisica, vitamina D Sono variabili numeriche che richiedono una «misura», una unità di misura e un livello di approssimazione:</li>
</ul>
<blockquote class="blockquote">
<p>Ore di sonno per notte: come calcolarle? Riportate con approssimazione a numeri interi o con decimali? E quanti? Ore di attività fisica all’aria aperta: come calcolarle? Riportate con approssimazione a numeri interi o con decimali? E quanti?</p>
</blockquote>
</section>
<section id="utilità-della-statistica-descrittiva" class="level2 p">
<h2 class="p anchored" data-anchor-id="utilità-della-statistica-descrittiva">Utilità della statistica descrittiva</h2>
<ul>
<li><p>Identificare le caratteristiche del campione di soggetti studiati.</p></li>
<li><p>Confrontare le casistiche di diversi studi: se i risultati di diversi studi differiscono una delle cause potrebbe essere la differente composizione dei campioni per variabili clinico/biologiche rilevanti.</p></li>
<li><p>Identificare le caratteristiche delle distribuzioni delle variabili nella fase preliminare al test statistico.</p></li>
<li><p>Una serie completa di dati non fornisce necessariamente informazioni facilmente interpretabili → trovare un compromesso tra sintesi ed informazioni rilevanti.</p></li>
</ul>
</section>
<section id="utilità-della-statistica-descrittiva-1" class="level2 p">
<h2 class="p anchored" data-anchor-id="utilità-della-statistica-descrittiva-1">Utilità della statistica descrittiva</h2>
<p><strong>1) fornire indicazioni sulla forma della distribuzione di frequenza delle variabili rilevate</strong></p>
<p>• Per le variabili categoriche e ordinali si può utilizzare una tabella di frequenza e/o una rappresentazione grafica.</p>
<p>• Per le variabili numeriche discrete o continue si ricorre a rappresentazioni grafiche.</p>
<p><strong>2) sintetizzare la distribuzione mediante indici di tendenza centrale e dispersione (</strong>utilizzate nel caso di variabili su scala numerica).</p>
<p>• Indici di tendenza centrale: un valore della variabile che dovrebbe essere ‘’rappresentativo’’ della distribuzione&nbsp;</p>
<p>• Indici di dispersione: quanto sono dispersi i valori della variabile attorno alla tendenza centrale maggiore è la dispersione e minore è la ‘’rappresentatività’’ dell’indice di tendenza centrale.</p>
<p>• La scelta degli indici di sintesi dipende <em>dalla scala di misura della variabile e dalla forma della distribuzione di frequenza</em></p>
</section>
<section id="table-1" class="level2">
<h2 class="anchored" data-anchor-id="table-1">Table 1</h2>
<p>La prima parte di ogni articolo fornisce una sintesi dei dati per la descrizione della casistica&nbsp;</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pkgs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'tableone'</span>, <span class="st">'dplyr'</span>, <span class="st">'data.table'</span>, <span class="st">'gt'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(pkgs, library, <span class="at">character.only =</span> T)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">'/Users/giacomobiganzoli/Desktop/Statistica Applicata alla Ricerca Biomedica - R/STAT DESCRITTIVA AP/zhu.csv'</span>, <span class="at">na =</span> <span class="st">'.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>tbl1 <span class="ot">&lt;-</span> data<span class="sc">%&gt;%</span>dplyr<span class="sc">::</span><span class="fu">select</span>(Gender, Age, Smoking, Alcohol, Sleep, OutdoorPA, MS)<span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(Gender, Smoking, Alcohol, MS), as.factor))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tbl1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'Gender'</span>, <span class="st">'Age'</span>, <span class="st">'Current Smoker'</span>, <span class="st">'Alcohol'</span>, <span class="st">'Sleep Duration (hours/day)'</span>, <span class="st">'Outdoor PA (hours/week)'</span>, <span class="st">'Metabolic Syndrome'</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>tbl1 <span class="ot">&lt;-</span> <span class="fu">CreateTableOne</span>(<span class="at">data =</span> tbl1)<span class="sc">%&gt;%</span><span class="fu">print</span>(., <span class="at">showAllLevels =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                        
                                         level Overall      
  n                                              546        
  Gender (%)                             1       164 (32.3) 
                                         2       344 (67.7) 
  Age (mean (SD))                              50.15 (13.23)
  Current Smoker (%)                     0       409 (85.6) 
                                         1        69 (14.4) 
  Alcohol (%)                            0       443 (92.7) 
                                         1        35 ( 7.3) 
  Sleep Duration (hours/day) (mean (SD))        7.03 (1.03) 
  Outdoor PA (hours/week) (mean (SD))           9.16 (4.78) 
  Metabolic Syndrome (%)                 0       367 (76.3) 
                                         1       114 (23.7) </code></pre>
</div>
</div>
<p>Per le variabili <strong>categoriche</strong> il <strong>numero di soggetti in ogni categoria con le %</strong></p>
<p>Per le variabili <strong>numeriche</strong> la sintesi è fornita come <strong>media +/- deviazione standard</strong></p>
<blockquote class="blockquote">
<p>Come si interpreta questo dato? Se la distribuzione è simmetrica (e bene approssimata da una Gaussiana) il 68% dei valori è compreso nell’intervallo media +/- deviazione standard</p>
</blockquote>
<p>Ma se la variabile non ha distribuzione simmetrica e/o non è bene approssimata da una Gaussiana questa proprietà non vale. Perché scrivere allora media +/- deviazione standard?</p>
</section>
<section id="indici-di-tendenza-centrale" class="level2 p">
<h2 class="p anchored" data-anchor-id="indici-di-tendenza-centrale">Indici di tendenza centrale</h2>
<p>La media aritmetica: è sempre un buon indice di tendenza centrale?</p>
<p>Media aritmetica (scala numerica continua, numerica discreta): è calcolata sommando tutte le osservazioni e dividendo per il totale.</p>
<p>utilizzando una notazione sintetica: per N osservazioni convalori <span class="math inline">\(X_1, X_2,..,X_N, \ media = \frac{(X_1+X_2+...X_N)}{N} = \sum_{i}^{N}\frac{X_i}{N}\)</span></p>
<p>È la misura più utilizzata ma è influenzata dai valori estremi: quei valori della distribuzione che sono ‘’distanti’’ dagli altri in quanto sono decisamente maggiori (spostano la media verso valori più elevati) o decisamente minori (spostano la media verso valori più bassi).</p>
<p>⚠️ <strong>Quando le distribuzioni non sono simmetriche la media non è un indice appropriato di tendenza centrale.</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Carica le librerie necessarie</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Numero di campioni per ogni distribuzione</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>n_samples <span class="ot">&lt;-</span> <span class="dv">1000000</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Parametri per la distribuzione Beta asimmetrica a destra (alpha &lt; beta)</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>alpha_destra <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>beta_destra <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Parametri per la distribuzione Beta asimmetrica a sinistra (alpha &gt; beta)</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>alpha_sinistra <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>beta_sinistra <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Genera campioni Beta asimmetrici</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>beta_asimmetrica_destra <span class="ot">&lt;-</span> <span class="fu">rbeta</span>(n_samples, <span class="at">shape1 =</span> alpha_destra, <span class="at">shape2 =</span> beta_destra)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>beta_asimmetrica_sinistra <span class="ot">&lt;-</span> <span class="fu">rbeta</span>(n_samples, <span class="at">shape1 =</span> alpha_sinistra, <span class="at">shape2 =</span> beta_sinistra)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea un data frame per entrambe le distribuzioni</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>dati <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">valore =</span> <span class="fu">c</span>(beta_asimmetrica_destra, beta_asimmetrica_sinistra, <span class="fu">rnorm</span>(n_samples, <span class="fl">0.5</span>, .<span class="dv">5</span>)),</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">tipo =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Asimmetrica a Destra"</span>, <span class="st">"Asimmetrica a Sinistra"</span>, <span class="st">'Normale'</span>), <span class="at">each =</span> n_samples)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Traccia i grafici delle distribuzioni</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dati, <span class="fu">aes</span>(<span class="at">x =</span> valore, <span class="at">fill =</span> tipo)) <span class="sc">+</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>tipo, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribuzioni Beta Asimmetriche a Destra e a Sinistra"</span>,</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Valore"</span>, <span class="at">y =</span> <span class="st">"Densità"</span>) <span class="sc">+</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">'none'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="576"></p>
</div>
</div>
</section>
<section id="le-misure-di-dispersione-attorno-alla-media" class="level2">
<h2 class="anchored" data-anchor-id="le-misure-di-dispersione-attorno-alla-media">Le misure di dispersione attorno alla media</h2>
<p>Devianza, Varianza e deviazione standard</p>
<ul>
<li><p>utilizzano come misura di distanza dalla media lo scarto quadratico</p></li>
<li><p>considerando le osservazioni <span class="math inline">\(x_1,x_2...x_n\)</span> , la cui media è <span class="math inline">\(\overline{x}\)</span></p></li>
<li><p>La devianza è:: <span class="math inline">\((x_1-\overline{x})^2 + (x_2-\overline{x})^2 + (x_3-\overline{x})^2+...+(x_n-\overline{x})^2 = \sum_i^N(x_i-\overline{x})^2\)</span></p></li>
<li><p>La varianza è ottenuta dividendo la devianza per N-1, ovvero i ‘gradi di libertà’: <span class="math inline">\(s^2 = \frac{(x_1-\overline{x})^2 + (x_2-\overline{x})^2 + (x_3-\overline{x})^2+...+(x_n-\overline{x})^2 }{N-1}= \frac{\sum_i^N(x_i-\overline{x})^2}{N-1}\)</span></p></li>
<li><p>varianza: l’unità di misura coincide con quella delle osservazioni (al quadrato), quindi non bene interpretabile, per questo si usa la deviazione standard: <span class="math inline">\(s = \sqrt{s^2}\)</span></p></li>
</ul>
<p>Quando le distribuzioni non sono simmetriche la varianza non è un indice appropriato di tendenza centrale. Come la media è influenzata dai valori estemi, anche la deviazione standard è influenzata dai valori estremi (ancora più della media). In caso di asimmetria accentuata la deviazione standard è più elevata della media → Media +/- deviazione standard non ha senso dal momento che media – deviazione standard è un numero &lt; 0!</p>
</section>
<section id="per-valutare-se-le-distribuzioni-sono-asimmeriche-è-necessario-analizzarle-ad-esempio-rappresentarle-graficamente" class="level2">
<h2 class="anchored" data-anchor-id="per-valutare-se-le-distribuzioni-sono-asimmeriche-è-necessario-analizzarle-ad-esempio-rappresentarle-graficamente">Per valutare se le distribuzioni sono asimmeriche è necessario analizzarle, ad esempio rappresentarle graficamente</h2>
<p><strong>Età</strong>: variabile numerica su scala discreta: infatti è misurata in «anni compiuti». Non sono possibili valori con cifre decimali ma solo interi 18,19,20,21,…..</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">table</span>(data<span class="sc">$</span>Age), <span class="at">ylab  =</span> <span class="st">'# times'</span>, <span class="at">xlab =</span> <span class="st">'Age (yrs)'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p><strong>Ore di sonno</strong> variabile numerica su scala discreta : infatti la variabile è riportata in ore e quindi sono possibili solo valori interi, 5,6,7,8,9</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">table</span>(data<span class="sc">$</span>Sleep), <span class="at">ylab  =</span> <span class="st">'# times'</span>, <span class="at">xlab =</span> <span class="st">'Sleep (hours/day)'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p><strong>Ore di attività fisica per settimana</strong> : è calcolata come media e quindi «in teoria» potrebbero assumere tutti i possibili valori e considerare la misura su scala continua ma in realtà sono presenti solo 4 possibili valori 1.8, 3.5, 7 e 14 quindi trattata come variabili numerica discreta.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">table</span>(data<span class="sc">$</span>Sleep), <span class="at">ylab  =</span> <span class="st">'# times'</span>, <span class="at">xlab =</span> <span class="st">'Sleep (hours/day)'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p><strong>Vitamina D:</strong> variabile numerica continua (assume valori decimali)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">table</span>(data<span class="sc">$</span>VD), <span class="at">ylab  =</span> <span class="st">'# times'</span>, <span class="at">xlab =</span> <span class="st">'vitD (u/L)'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="576"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data<span class="sc">$</span>VD, <span class="at">breaks =</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid" width="576"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(b <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">110</span>,<span class="dv">20</span>)){</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">hist</span>(data<span class="sc">$</span>VD, <span class="at">breaks =</span> b, <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">'# bins'</span>, b), </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">'vitD (u/L)'</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-7-3.png" class="img-fluid" width="576"></p>
</div>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-7-4.png" class="img-fluid" width="576"></p>
</div>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-7-5.png" class="img-fluid" width="576"></p>
</div>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-7-6.png" class="img-fluid" width="576"></p>
</div>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-7-7.png" class="img-fluid" width="576"></p>
</div>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-7-8.png" class="img-fluid" width="576"></p>
</div>
</div>
</section>
<section id="altre-misure-di-tendenza-centrale" class="level2">
<h2 class="anchored" data-anchor-id="altre-misure-di-tendenza-centrale">Altre misure di tendenza centrale</h2>
<p>La media non è l’unico indice di tendenza centra le che si può considerare. In presenza di valori estremi nella distribuzione è preferibile ricorrere adun indice di tendenza centrale che sia meno influenzato dalla presenzadi valori estremi rispetto alla media (più robusto) in presenza di distribuzioni asimmetriche è preferibili ricorrere adun indice di tendenza centrale che meglio rappresenti il «centro» delladistribuzione.</p>
<p>Un indice che ha tale caratteristica è la mediana</p>
</section>
<section id="altre-misure-di-tendenza-centrale-1" class="level2">
<h2 class="anchored" data-anchor-id="altre-misure-di-tendenza-centrale-1">Altre misure di tendenza centrale</h2>
<p>La mediana (m) di un insieme finito di osservazioni è quel valore della variabile che divide l’insieme ordinato delle osservazioni in due parti in modo tale che il numero delle osservazioni che precede la mediana sia uguale al numero di osservazioni successive alla mediana. Una percentuale ≤ al 50% delle osservazioni ha valore della variabile minore della mediana e una percentuale ≤ al 50% ha valore della variabile maggiore della mediana</p>
<p>per calcolarla occorre:</p>
<ol type="1">
<li><p>ordinare le N osservazioni in senso crescente:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>age2 <span class="ot">&lt;-</span> data<span class="sc">$</span>Age[<span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>Age)]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>age2 <span class="ot">&lt;-</span> <span class="fu">sort</span>(age2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></li>
<li><p>identificare la posizione della mediana:</p>
<ul>
<li><p>se N è dispari la mediana si trova in corrispondenza della osservazione xq dove q=(N + 1)/2 → m</p></li>
<li><p>se N è pari la mediana si trova al centro tra xq ed xq+1 dove q=N/2 e q+1=(N/2) + 1</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(age2) <span class="co"># PARI</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 476</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>q <span class="ot">=</span> <span class="fu">length</span>(age2)<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>q</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 238</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>q1 <span class="ot">=</span> (<span class="fu">length</span>(age2)<span class="sc">/</span><span class="dv">2</span>) <span class="sc">+</span><span class="dv">1</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>q1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 239</code></pre>
</div>
</div></li>
<li><p>Calcolare la mediana m = 0.5 ∗ (xq+1 + xq)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">=</span> <span class="fl">0.5</span> <span class="sc">*</span> (age2[q] <span class="sc">+</span> age2[q1])</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 53</code></pre>
</div>
</div></li>
</ol>
<p>Con R la funzione ‘median’ velocizza notevolmente il processo</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(data<span class="sc">$</span>Age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 53</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">table</span>(data<span class="sc">$</span>Age), <span class="at">ylab =</span> <span class="st">'Frequency'</span>, <span class="at">xlab =</span> <span class="st">'Age (yrs)'</span>, <span class="at">main =</span> <span class="st">'In rosso la mediana della distribuzione'</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">as.character</span>(<span class="fu">median</span>( data<span class="sc">$</span>Age, <span class="at">na.rm =</span> T)), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">'red'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="576"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">table</span>(data<span class="sc">$</span>Age), <span class="at">ylab =</span> <span class="st">'Frequency'</span>, <span class="at">xlab =</span> <span class="st">'Age (yrs)'</span>, <span class="at">main =</span> <span class="st">'In rosso la mediana della distribuzione </span><span class="sc">\n</span><span class="st"> in blu la media della distribiuzione'</span>) </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">as.character</span>(<span class="fu">median</span>( data<span class="sc">$</span>Age, <span class="at">na.rm =</span> T)), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">'red'</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">as.character</span>(<span class="fu">mean</span>( data<span class="sc">$</span>Age, <span class="at">na.rm =</span> T)), <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">'blue'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid" width="576"></p>
</div>
</div>
</section>
<section id="sintesi-numerica-dei-dati-le-misure-di-dispersione-attorno-alla-mediana-campo-di-variazione-interquartile" class="level2">
<h2 class="anchored" data-anchor-id="sintesi-numerica-dei-dati-le-misure-di-dispersione-attorno-alla-mediana-campo-di-variazione-interquartile">Sintesi numerica dei dati: le misure di dispersione attorno alla mediana campo di variazione interquartile</h2>
<p>• differenza tra il 3° quartile (Q3) e il 1° quartile (Q1).</p>
<p>In una situazione «ideale»</p>
<ul>
<li><p>Q3 è il valore che suddivide la distribuzione in modo tale che il 75% delle osservazioni è &lt; di Q3 e il 25% è maggiore di Q3</p></li>
<li><p>Q1 è il valore che suddivide la distribuzione in modo tale che il 25% delle osservazioni è &lt; di Q1 e il 75% delle osservazioni è &gt; Q1</p></li>
<li><p>Tra Q3 e Q1 è compresa una percentuale pari al 50% delle osservazioni</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>q1 <span class="ot">=</span> <span class="fu">quantile</span>(data<span class="sc">$</span>VD, <span class="at">probs =</span> <span class="fu">c</span>(.<span class="dv">25</span>), <span class="at">na.rm =</span> T)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>q1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    25% 
25.7625 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>q3 <span class="ot">=</span> <span class="fu">quantile</span>(data<span class="sc">$</span>VD, <span class="at">probs =</span> <span class="fu">c</span>(.<span class="dv">75</span>), <span class="at">na.rm =</span> T)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>q3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    75% 
34.0125 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data<span class="sc">$</span>VD, <span class="at">breaks =</span> <span class="dv">30</span>, <span class="at">axes =</span> F)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="fu">round</span>(<span class="fu">seq</span>(<span class="fu">min</span>(data<span class="sc">$</span>VD, <span class="at">na.rm =</span> T), <span class="fu">max</span>(data<span class="sc">$</span>VD, <span class="at">na.rm =</span> T), <span class="at">length.out =</span> <span class="dv">10</span>),<span class="dv">2</span>))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> q1, <span class="at">lwd =</span><span class="dv">2</span>, <span class="at">col =</span> <span class="st">'red'</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> q3, <span class="at">lwd =</span><span class="dv">2</span>, <span class="at">col =</span> <span class="st">'blue'</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">median</span>(data<span class="sc">$</span>VD, <span class="at">na.rm =</span> T), <span class="at">lwd =</span><span class="dv">2</span>, <span class="at">col =</span> <span class="st">'purple'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p><img src="images/algoritmi.png" class="img-fluid"></p>
</section>
<section id="mediana-e-quartili-per-descrivere-graficamente-le-distribuzioni-il-box-plot" class="level2">
<h2 class="anchored" data-anchor-id="mediana-e-quartili-per-descrivere-graficamente-le-distribuzioni-il-box-plot">Mediana e quartili per descrivere graficamente le distribuzioni: il ‘’box-plot’’</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(data<span class="sc">$</span>VD, <span class="at">ylab =</span> <span class="st">'Vitamin D (U/L)'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>• è costruito dalle seguenti caratteristiche della distribuzione: il minimo, Q1, mediana, Q3, il massimo</p>
<p>• la riga all’interno del box è la mediana.</p>
<p>• i lati del box sono Q1 (basso) e Q3 (alto);</p>
<p>• l’altezza del box è il range interquartile (Q3-Q1)</p>
<p>• le linee che si estendono oltre il box (wiskers) contengono il 25% delle osservazioni e sono calcolate come segue: wb: Q1-1.5<em>(Q3-Q1) e wa: Q3+1.5</em>(Q3-Q1)se wb è &lt; del minimo dei dati si pone wb = al minimo dei datise wa è &gt; del massimo dei dati si pone wa = al massimo dei dati</p>
<p>• i valori che si estendono oltre gli wiskers sono definiti «outliers»</p>
<p><strong>Ma che utilità può avere il box-plot?</strong></p>
<ul>
<li><p>evidenziare osservazioni outliers: sono dati «atipici» rispetto agli altri quindi è opportuno controllarli, potrebbero essere errori di rilevazione oppure soggetti con particolari condizioni che devono essere valutati a parte</p></li>
<li><p>evidenziare se la distribuzione è simmetrica o asimmetrica: se la distribuzione è asimmetrica non è opportuno usare la media come indice di tendenza centrale, invece la mediana è comunque corretta!</p></li>
<li><p>quando si confrontano due distribuzioni fornisce una indicazione sulla differenza di tendenza centrale, di dispersione e sul grado di sovrapposizione dei valori della variabile nelle due distribuzioni</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>MS <span class="ot">&lt;-</span> <span class="fu">as.character</span>(data<span class="sc">$</span>MS)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(data<span class="sc">$</span>VD<span class="sc">~</span>data<span class="sc">$</span>MS, <span class="at">ylab =</span> <span class="st">'Vitamin D (U/L)'</span>, <span class="at">xlab =</span> <span class="st">'MetS'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="576"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(data<span class="sc">$</span>Age<span class="sc">~</span>data<span class="sc">$</span>MS, <span class="at">ylab =</span> <span class="st">'Age (yrs)'</span>, <span class="at">xlab =</span> <span class="st">'MetS'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid" width="576"></p>
</div>
</div></li>
</ul>
</section>
<section id="le-funzioni-di-distribuzione-cumulata-per-il-confronto-tra-distribuzioni" class="level2">
<h2 class="anchored" data-anchor-id="le-funzioni-di-distribuzione-cumulata-per-il-confronto-tra-distribuzioni">Le funzioni di distribuzione cumulata per il confronto tra distribuzioni</h2>
<p>La distribuzione cumulata: per ogni valore X di vit.D è la frequenza di soggetti che hanno valori di vit. D &lt;= X.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>ecdfDIBIC <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(x))</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">$</span>cum.freq <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(x<span class="sc">$</span>Freq)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">$</span>perc <span class="ot">&lt;-</span> <span class="fu">round</span>(x<span class="sc">$</span>cum.freq<span class="sc">/</span><span class="fu">sum</span>(x<span class="sc">$</span>Freq),<span class="dv">2</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(x)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">'val'</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">$</span>val <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(x<span class="sc">$</span>val))</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  x</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>ecdf.age.si <span class="ot">&lt;-</span> <span class="fu">ecdfDIBIC</span>(data<span class="sc">$</span>Age[data<span class="sc">$</span>MS <span class="sc">==</span> <span class="dv">1</span>])</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>ecdf.age.no <span class="ot">&lt;-</span> <span class="fu">ecdfDIBIC</span>(data<span class="sc">$</span>Age[data<span class="sc">$</span>MS <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ecdf.age.si<span class="sc">$</span>val, ecdf.age.si<span class="sc">$</span>perc, <span class="at">type =</span> <span class="st">'s'</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">main =</span> <span class="st">'ECDFs of Age'</span>, </span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">'Age (yrs)'</span>,<span class="at">ylab =</span> <span class="st">'P(X &lt;=x)'</span>)</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(ecdf.age.no<span class="sc">$</span>val, ecdf.age.no<span class="sc">$</span>perc, <span class="at">type =</span> <span class="st">'s'</span>, <span class="at">col =</span> <span class="st">'purple'</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">c</span>(.<span class="dv">25</span>, .<span class="dv">5</span>, .<span class="dv">75</span>), <span class="at">lty =</span> <span class="dv">3</span>)</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">'bottomright'</span>, <span class="fu">c</span>(<span class="st">'MetS'</span>, <span class="st">'No MetS'</span>), <span class="at">lty =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">'black'</span>, <span class="st">'purple'</span>), </span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="576"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>find.values <span class="ot">&lt;-</span> <span class="cf">function</span>(ecdf, p){</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">max</span>(ecdf<span class="sc">$</span>val[ecdf<span class="sc">$</span>perc <span class="sc">&lt;=</span> p])</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="fu">find.values</span>(<span class="at">ecdf =</span> ecdf.age.si, <span class="at">p =</span> .<span class="dv">75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 63</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>all <span class="ot">&lt;-</span> <span class="fu">ecdfDIBIC</span>(data<span class="sc">$</span>VD)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>ms.si <span class="ot">&lt;-</span> <span class="fu">ecdfDIBIC</span>(data<span class="sc">$</span>VD[data<span class="sc">$</span>MS <span class="sc">==</span> <span class="dv">1</span>])</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>ms.no <span class="ot">&lt;-</span> <span class="fu">ecdfDIBIC</span>(data<span class="sc">$</span>VD[data<span class="sc">$</span>MS <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(all<span class="sc">$</span>val, all<span class="sc">$</span>perc, <span class="at">type =</span> <span class="st">'s'</span>, <span class="at">xlab =</span> <span class="st">'Vitamin D (U/L)'</span>, <span class="at">ylab =</span> <span class="st">'P(X &lt;= x)'</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">main =</span> <span class="st">'ECDFs of Vitamin D'</span>, <span class="at">axes =</span> F)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(ms.si<span class="sc">$</span>val, ms.si<span class="sc">$</span>perc, <span class="at">type =</span> <span class="st">'s'</span>, <span class="at">xlab =</span> <span class="st">'Vitamin D (U/L)'</span>, <span class="at">ylab =</span> <span class="st">'%'</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="dv">2</span>)</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(ms.no<span class="sc">$</span>val, ms.no<span class="sc">$</span>perc, <span class="at">type =</span> <span class="st">'s'</span>, <span class="at">xlab =</span> <span class="st">'Vitamin D (U/L)'</span>, <span class="at">ylab =</span> <span class="st">'%'</span>, <span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="dv">3</span>)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">c</span>(.<span class="dv">25</span>, .<span class="dv">5</span>, .<span class="dv">75</span>), <span class="at">lty =</span> <span class="dv">3</span>)</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="fu">seq</span>(<span class="dv">5</span>,<span class="dv">45</span>,<span class="dv">1</span>))</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">at =</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,.<span class="dv">05</span>))</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">'bottomright'</span>, <span class="fu">c</span>(<span class="st">'All'</span>, <span class="st">'MetS'</span>, <span class="st">'No Mets'</span>),<span class="at">lty =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">lwd =</span> <span class="dv">2</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="576"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data<span class="sc">$</span>VD[data<span class="sc">$</span>MS <span class="sc">==</span> <span class="dv">1</span>], <span class="at">breaks  =</span> <span class="dv">30</span>, <span class="at">main =</span> <span class="st">'MetS'</span>, <span class="at">xlab =</span> <span class="st">'Vitamin D (U/L)'</span>, <span class="at">axes =</span> F)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="fu">seq</span>(<span class="dv">5</span>,<span class="dv">50</span>,<span class="dv">5</span>))</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data<span class="sc">$</span>VD[data<span class="sc">$</span>MS <span class="sc">==</span> <span class="dv">0</span>], <span class="at">breaks =</span> <span class="dv">30</span>, <span class="at">main =</span> <span class="st">'No MetS'</span>, <span class="at">xlab =</span> <span class="st">'Vitamin D (U/L)'</span>, <span class="at">axes =</span> F)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="fu">seq</span>(<span class="dv">5</span>,<span class="dv">50</span>,<span class="dv">5</span>))</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data<span class="sc">$</span>VD, <span class="at">breaks =</span> <span class="dv">30</span>, <span class="at">main =</span> <span class="st">'All'</span>, <span class="at">xlab =</span> <span class="st">'Vitamin D (U/L)'</span>, <span class="at">axes =</span> F)</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at =</span> <span class="fu">seq</span>(<span class="dv">5</span>,<span class="dv">50</span>,<span class="dv">5</span>))</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-16-2.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Grafici vietati:</p>
<p><a href="https://biostat.app.vumc.org/wiki/pub/Main/TatsukiRcode/Poster3.pdf" class="uri">https://biostat.app.vumc.org/wiki/pub/Main/TatsukiRcode/Poster3.pdf</a></p>
</section>
<section id="installazione-di-r" class="level2">
<h2 class="anchored" data-anchor-id="installazione-di-r">Installazione di R</h2>
<p>R è un linguaggio di programmazione open source ampiamente utilizzato per l’analisi statistica e la creazione di grafici. È stato creato da Ross Ihaka e Robert Gentleman e la sua prima versione è stata rilasciata nel 1995.</p>
<p>R è diventato uno degli strumenti più popolari tra i data scientist e gli analisti dei dati, grazie alla sua vasta libreria di pacchetti che consentono di manipolare, visualizzare e analizzare grandi quantità di dati. Inoltre, la sua sintassi intuitiva e flessibile lo rende facile da imparare anche per coloro che non hanno una formazione di programmazione formale.</p>
<p>Oltre alla sua capacità di analisi statistica, R è anche utilizzato in diverse applicazioni come la creazione di dashboard interattivi, la creazione di report automatizzati e la costruzione di modelli di apprendimento automatico.</p>
<p>Inoltre, R è supportato da una vasta comunità di sviluppatori e utenti che contribuiscono alla sua crescita, alla sua manutenzione e alla creazione di nuovi pacchetti e funzionalità. Grazie a tutto questo, R è diventato uno strumento essenziale per chiunque lavori con i dati.</p>
<section id="se-non-avete-ancora-installato-r" class="level3">
<h3 class="anchored" data-anchor-id="se-non-avete-ancora-installato-r">Se non avete ancora installato R</h3>
<p>Se non avete ancora installato R, potete seguire questi semplici step per poterlo installare velocemente:</p>
<p>Cliccate su questo <a href="https://cran.r-project.org.">link</a></p>
<p>Accederete ad una pagina come questa:</p>
<p><img src="images/Schermata 2023-05-03 alle 15.20.20.png" class="img-fluid"></p>
<section id="utilizzi-windows" class="level4">
<h4 class="anchored" data-anchor-id="utilizzi-windows">Utilizzi Windows?</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Schermata 2023-05-03 alle 12.25.11.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Accedi al link cerchiato in rosso</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Schermata 2023-05-03 alle 12.34.28.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Accedi al link cerchiato in rosso</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Schermata 2023-05-04 alle 08.36.39.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Accedi al link cerchiato in rosso. Il download del file .exe dovrebbe partire automaticamente. Una volta scaricato, apri il file, per iniziare ad installare R sul tuo PC</figcaption>
</figure>
</div>
</section>
<section id="utilizzi-macos" class="level4">
<h4 class="anchored" data-anchor-id="utilizzi-macos">Utilizzi macOS?</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Schermata 2023-05-03 alle 12.46.57-01.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Accedi al link cerchiato in rosso.</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Schermata 2023-05-03 alle 12.49.59.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Se hai un Mac con processore M1 o M2 accedi al link cerchiato in rosso. Altrimenti, accedi al link cerchiato in blu</figcaption>
</figure>
</div>
</section>
</section>
<section id="avete-installato-r" class="level3">
<h3 class="anchored" data-anchor-id="avete-installato-r">Avete installato R</h3>
<p>Una volta installato correttamente R, apritelo. Vi si aprirà una finestra, definita <em>console</em>, di questo tipo:</p>
<p><img src="images/Schermata 2023-05-03 alle 14.23.33.png" class="img-fluid"></p>
<p>Provate a digitare nella console, dopo il simbolo ‘&gt;’, questo codice:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Stat-descrittiva_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="576"></p>
</div>
</div>
<p>Se vi appare un grafico come quello sopra riportato, allora avete installato R in modo corretto e siete pronti per poterlo utilizzare in classe! 🤘</p>
</section>
</section>
<section id="installare-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="installare-rstudio">Installare RStudio</h2>
<p>Un altro programma molto utile per interfacciarsi con R è RStudio.</p>
<blockquote class="blockquote">
<p>RStudio is an integrated development environment for R, a programming language for statistical computing and graphics. It is available in two formats: RStudio Desktop is a regular desktop application while RStudio Server runs on a remote server and allows accessing RStudio using a web browser.</p>
</blockquote>
<p>Per installare R Studio in modo semplice cliccate questo <a href="https://posit.co/download/rstudio-desktop/">link</a> e seguite le istruzioni che sono descritte nella pagina.</p>
<p>❗ Se avete già installato R, non dovete far altro che seguire lo step 2 ed installe RStudio.</p>
<p><img src="images/Schermata 2023-05-15 alle 17.28.23.png" class="img-fluid"></p>
<p>Una volta scaricato ed installato, se aprirete RStudio accederete ad una pagina di questo tipo:</p>
<p><img src="images/Schermata 2023-05-15 alle 17.30.05.png" class="img-fluid"></p>
</section>
<section id="non-esitare-a-contattarmi-per-evenutali-domande-eo-problemi-di-installazione" class="level2">
<h2 class="anchored" data-anchor-id="non-esitare-a-contattarmi-per-evenutali-domande-eo-problemi-di-installazione">📧 Non esitare a contattarmi per evenutali domande e/o problemi di installazione!📧</h2>
<p>Giacomo: <em>giacomo.biganzoli@unimi.it</em></p>
</section>
<section id="introduzione-al-linguaggio-di-r" class="level2">
<h2 class="anchored" data-anchor-id="introduzione-al-linguaggio-di-r">Introduzione al linguaggio di R</h2>
<p><img src="images/18738722_1514769918575294_3569966632389540802_o.png" class="img-fluid" width="463"></p>
<section id="script-oggetti-e-funzioni" class="level3">
<h3 class="anchored" data-anchor-id="script-oggetti-e-funzioni">Script: oggetti e funzioni</h3>
<p>Generalmente, per poter importare ed analizzare i dati che avete accuratamente raccolto, scriverete un ‘programma’ in uno <em>script</em>. Un programma non è altro che un elenco di oggetti e funzioni che devono essere eseguite per ottenere i risultati desiderati. Lo script viene successivamente eseguito ed interpretato da R in modo tale da ottenere i risultati richiesti.</p>
<p>I principali tipi di oggetti in R sono:</p>
<ul>
<li><p>stringhe di caratteri</p></li>
<li><p>vettori</p></li>
<li><p>matrici</p></li>
<li><p>liste</p></li>
<li><p>data.frames</p></li>
</ul>
<p>L’oggetto che più utilizzeremo sarà il <em>data.frame</em>. Pensate al data.frame come la forma di dati tabulati che trovereste se apriste un comunissimo file <em>.xlsx</em> o <em>.csv</em> in Excel.</p>
<p>In R, le funzioni servono a ‘trasformare’ un oggetto in un altro oggetto all’interno dell’ambiente R. R è ricco di funzioni di base e funzioni scritte da esperti per poter fare una miriade di cose. Inolte, in R è possibile scrivere le proprie funzioni (solo per utilizzatori avanzati!).</p>
<p>Ad esempio, digitando nello script il seguente codice, assegno ad un oggetto che chiamo <strong><em>boomer</em></strong> la stringa di caratteri ‘I am smiling because i am using R’. Se successivamente applico la funzione <em>print()</em> all’oggetto <strong><em>boomer</em></strong>, R stampa cosa è assegnato a <strong><em>boomer</em></strong>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>boomer <span class="ot">&lt;-</span> <span class="st">"I am smiling because i am using R"</span> <span class="co"># assegno all'oggetto boomer una stringa di caratteri</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(boomer) <span class="co"># eseguo il print dell'oggetto per vedere cosa riporta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "I am smiling because i am using R"</code></pre>
</div>
</div>
<p>Se invece consideriamo un vettore, inteso come una sequenza di valori numerici o di caratteri, possono essere utili altre funzioni. Ad esempio, pensate di intervistare cinque vostri colleghi per chiedere loro quante visite ospedaliere hanno eseguito negli ultimi 5 anni. I cinque colleghi vi rispondono nel seguente modo:</p>
<ol type="1">
<li><p>5 visite</p></li>
<li><p>3 visite</p></li>
<li><p>2 visite</p></li>
<li><p>1 visita</p></li>
<li><p>0 visite</p></li>
</ol>
<p>Allora possiamo assegnare all’oggetto <strong><em>visite</em></strong> un vettore definito in questo modo:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>visite <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>) <span class="co"># genero un nuovo vettore 'visite'</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(visite) <span class="co"># guardo cosa contiene il vettore 'visite'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 3 2 1 0</code></pre>
</div>
</div>
<p>Se ad esempio sono interessato al totale delle visite dei cinque colleghi intervistati, posso applicare al vettore <strong><em>visite</em></strong> la funzione <em>sum()</em></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(visite) <span class="co"># applico la funzione sum() per calcolare il totale delle visite dei cinque colleghi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
</div>
<p>Se invece fossi interessato alla media del numero di visite dei cinque colleghi intervistati, posso applicare a <strong><em>visite</em></strong> la funzione <em>mean()</em></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(visite) <span class="co"># applico la funzione mean() per calcolare il totale delle visite dei cinque colleghi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.2</code></pre>
</div>
</div>
<p>❗ questi ultimi due calcoli (totale con la funzione <em>sum()</em> e media con la funzione <em>mean()</em> ) non sono stati assegnati ad alcun oggetto. Se nella nostra sessione di analisi volessimo utilizzare nuovamente la media e il totale delle visite, possiamo assegnare a due nuovi oggetti, rispettivamente <strong><em>mean_visite</em></strong> e <strong><em>tot_visite</em></strong>, il calcolo della media e del totale del numero di visite.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>mean_visite <span class="ot">&lt;-</span> <span class="fu">mean</span>(visite) <span class="co"># assegno all'oggetto mean_visite il calcolo della media del vettore visite</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>tot_visite <span class="ot">=</span> <span class="fu">sum</span>(visite) <span class="co"># assegno all'oggetto tot_visite il calcolo del totale del vettore visite</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mean_visite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.2</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tot_visite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
</div>
<p>Se fossi interessato, per qualche motivo particolare, a calcolare la differenza tra <strong><em>tot_visite</em></strong> e <strong><em>mean_visite</em></strong>, allora, semplicemente, potrei digitare il codice:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>tot_visite <span class="sc">-</span> mean_visite <span class="co"># faccio la differenza tra totale e media</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.8</code></pre>
</div>
</div>
<p>e assegnare a <strong><em>diff_visite</em></strong> questo calcolo:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>diff_visite <span class="ot">=</span> tot_visite <span class="sc">-</span> mean_visite <span class="co"># assego ad un oggetto diff_visite la differenza tra totale e media. </span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(diff_visite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.8</code></pre>
</div>
</div>
<p>⚠️ Probabilmente avrete notato che per assegnare vettori o stringhe di caratteri ad oggetti utilizzo indistintamente il simbolo ‘=’ o il simbolo ‘&lt;-’. Nonostante l’utilizzo di uno o dell’altro simbolo abbia generato grande dibattito fra i vari <em>R nerds</em> nel mondo:</p>
<p><img src="images/19225137_1539350236117262_5861074309942043266_n.png" class="img-fluid" width="281"></p>
<p><strong>Noi d’ora in poi, per comodità, utilizzeremo il simbolo ‘=’.</strong></p>
<p>⚠️ Inoltre, avrete notato che dopo ogni codice scritto, segue quasi sempre un commento al codice preceduto da un #. E buona norma commentare il codice scritto. Questo perché, se in futuro vorrete riprendere il codice per le analisi oppure inviarlo ad un collega per farlgielo utilizzare, saprete perché era stata utilizzata tale funzione, o perché era stato creato tale oggetto etc etc…</p>
<section id="sec-bonus" class="level4">
<h4 class="anchored" data-anchor-id="sec-bonus">bonus!</h4>
<p>In R le funzioni, come in matematica, si possono concatenare! Questo vuol dire che se volessi applicare ad uno stesso oggetto (A) più di una funzione (<em>f() e g()</em> ), al posto di creare e salvare due o più oggetti per applicare in sequenza le funzioni, potrei concatenarle in questo modo:</p>
<p><em>g( f(A) )</em></p>
<p>Esempio:</p>
<p>Supponiamo di aver misurato e raccolto i dati della massa corporea in kg di 5 soggetti in un vettore <strong><em>weight</em></strong> così definito <em>c(64.679, 78.943, 60.321, 90.453, 112.765)</em>. Se volessi arrotondare i valori della massa corporea alla sola cifra intera (considerando solo i kg) e poi volessi calcolare la media dei valori, allora potrei fare in questo modo:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>weight <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">64.679</span>, <span class="fl">78.943</span>, <span class="fl">60.321</span>, <span class="fl">90.453</span>, <span class="fl">112.765</span>) <span class="co"># assegno al vettore weight i valori di massa corporea</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">round</span>(weight)) <span class="co"># arrotondo a numeri interi e poi eseguo la media </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 81.4</code></pre>
</div>
</div>
<p>❗ L’ordine in cui applichiamo le funzioni conta. Se invertissimo l’ordine delle funzioni, il valore ottenuto è diverso:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(weight)) <span class="co"># eseguo la media e poi arrotondo a numeri interi </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 81</code></pre>
</div>
</div>
</section>
<section id="alcune-funzioni-essenziali" class="level4">
<h4 class="anchored" data-anchor-id="alcune-funzioni-essenziali">Alcune funzioni essenziali:</h4>
<p>Le funzioni <em>help()</em>, <em>ls()</em>, install.packages() e library(), sono quattro funzioni essenziali. La prima serve per interrogare R sul tipo di funzioni che stiamo utilizzando. Ad esempio, se trovo la funzione <em>mean()</em> ma non riesco a capire cosa voglia dire e/o cosa serva, allora posso utilizzare la funzione <em>help()</em> al cui interno digito il nome della funzione a me sconosciuta (senza le due parentesi).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">"mean"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>La funzione <em>ls()</em> invece mi serve per vedere quali sono gli oggetti che ho salvato nella workspace di R. Sopratutto in caso di codici molto lunghi, non possiamo memorizzare tutto quello che abbiamo creato!</p>
<p>Se utilizzo la funzione <em>ls()</em>, R mi stamperà tutti gli oggetti salvati nella workspace</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "age2"                      "all"                      
 [3] "alpha_destra"              "alpha_sinistra"           
 [5] "b"                         "beta_asimmetrica_destra"  
 [7] "beta_asimmetrica_sinistra" "beta_destra"              
 [9] "beta_sinistra"             "boomer"                   
[11] "data"                      "dati"                     
[13] "diff_visite"               "ecdf.age.no"              
[15] "ecdf.age.si"               "ecdfDIBIC"                
[17] "find.values"               "has_annotations"          
[19] "m"                         "mean_visite"              
[21] "ms.no"                     "ms.si"                    
[23] "n_samples"                 "pkgs"                     
[25] "q"                         "q1"                       
[27] "q3"                        "tbl1"                     
[29] "tot_visite"                "visite"                   
[31] "weight"                   </code></pre>
</div>
</div>
<p>La funzione <em>install.packages()</em> mi permette di installare pacchetti di funzioni in aggiunta a quelli pre-installati, così da poter utilizzare qualsiasi tipo di funzione non di base. La funzione <em>library()</em> invece mi serve per caricare i nuovi pacchetti installati.</p>
<p>Ad esempio, voglio installare il pacchetto <strong>dplyr</strong> e caricarlo nella workspace.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages('dplyr') #installo il pacchetto dplyr</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># carico il pacchetto dplyr nella workspace cosi che è pronto per poter essere utilizzato</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In questa piccola sezione, vi abbiamo mostrato poche delle migliaia funzioni disponibili in R. Nel corso della Sessione 1, e nella prossima sessione, avremo modo di indicarvi ulteriori funzioni utili per l’analisi dei dati. Lungi da noi riuscire ad esaurire in poche ore tutte le funzioni disponibili per poter analizzare i vostri dati. Ma uno strumento fondamentale che potete utilizzare gratuitamente sul web è:</p>
<p><img src="images/Schermata 2023-05-04 alle 07.47.47.png" class="img-fluid"></p>
<p>Un <a href="https://stackoverflow.com">website</a> dove vengono raccolte domande e risposte degli users di R (e non solo), cui potete fare riferimento qualora aveste dei problemi con il vostro codice, ma sopratutto voleste informazioni sull’esistenza di una data funzione. Molto spesso, le domande e/o i problemi sopraggiunti, sono già capitati ad altri users come voi!</p>
</section>
</section>
</section>
<section id="caricare-i-dati-su-r" class="level2">
<h2 class="anchored" data-anchor-id="caricare-i-dati-su-r">Caricare i dati su R</h2>
<p>Ora passiamo all’aspetto più importante e per alcuni il più tedioso: caricare in maniera pulita e veloce i dati che avete raccolto. Da REDCap avrete modo di scaricare i dati in forma tabulata in formato <strong>.csv</strong>, .<strong>xls</strong>, <strong>.xlsx,</strong> o <strong>txt</strong>. Il consiglio che vi diamo è di preferire il formato <strong>.txt</strong> per leggere i dati.</p>
<p>Come potete immaginare, in R esistono numerose funzioni per leggere i dati in ogni formato. Tra queste si annovera una funzione principale che è quella universalmente più performante, proveniente dal pacchetto <strong><em>utils</em></strong>, chiamata <em>read.table()</em>. La funzione legge un file in formato tabulato e ne crea un frame di dati, con i casi corrispondenti alle righe e le variabili alle colonne del file. La funzione ha i seguenti parametri:</p>
<p><img src="images/Schermata 2023-05-08 alle 17.22.38.png" class="img-fluid"></p>
<p>La compilazione di questi parametri è obbligatoria, di altri è solo facoltativa.</p>
<table class="table">
<colgroup>
<col style="width: 5%">
<col style="width: 94%">
</colgroup>
<thead>
<tr class="header">
<th>Parametro</th>
<th>Utilizzo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>file</strong></td>
<td>Il percorso e il nome del file da cui leggere i dati. Ogni riga della tabella appare come una riga del file.</td>
</tr>
<tr class="even">
<td><strong>header</strong></td>
<td>un valore logico che indica se il file contiene i nomi delle variabili come prima riga. Se manca, il valore è determinato dal formato del file: header è impostato su TRUE se e solo se la prima riga contiene una colonna in meno rispetto al numero di colonne per le altre righe.</td>
</tr>
<tr class="odd">
<td><strong>sep</strong></td>
<td>Il carattere di separazione delle colonne. I valori su ogni riga del file sono separati da questo carattere. Se sep = “” (l’impostazione predefinita per read.table) il separatore è uno “spazio bianco”, cioè uno o più spazi, tabulazioni, newline o ritorni a capo.</td>
</tr>
<tr class="even">
<td><strong>dec</strong></td>
<td>il carattere utilizzato nel file per i punti decimali.</td>
</tr>
<tr class="odd">
<td><strong>row.names</strong></td>
<td><p>un vettore di nomi di righe. Può essere un vettore con i nomi effettivi delle righe, oppure un numero singolo con la colonna della tabella che contiene i nomi delle righe, o una stringa di caratteri con il nome della colonna della tabella che contiene i nomi delle righe.</p>
<p>Se esiste un’intestazione e la prima riga contiene un campo in meno rispetto al numero di colonne, per i nomi delle righe viene utilizzata la prima colonna dell’input. Altrimenti, se row.names manca, le righe vengono numerate.</p></td>
</tr>
<tr class="even">
<td><strong>col.names</strong></td>
<td>un vettore di nomi opzionali per le variabili. L’impostazione predefinita prevede l’uso di “V” seguito dal numero della colonna.</td>
</tr>
<tr class="odd">
<td><strong>skip</strong></td>
<td>il numero di righe da ‘saltare’ prima che il programma legga i dati</td>
</tr>
<tr class="even">
<td><strong>colClasses</strong></td>
<td>carattere. Un vettore di classi da assumere per le colonne. Se non ha nome, viene riciclato come necessario. Se con nome, i nomi vengono abbinati e i valori non specificati vengono considerati NA.</td>
</tr>
</tbody>
</table>
<p>La prima cosa da controllare sarà il path del file in cui è salvato il vostro file <strong>.txt</strong>. Questo perché dovrete specificarlo nel parametro file. Su Windows e MacOS le cose funzionano differentemente.</p>
<p>Su Windows il path va specificato in questo modo:</p>
<blockquote class="blockquote">
<p>C:\\path\\to\\directory\\file.txt</p>
</blockquote>
<p>Su MacOS il path va specificato in questo modo:</p>
<blockquote class="blockquote">
<p>/path/to/directory/file.txt</p>
</blockquote>
<p>Attualmente su questo computer sto utilizzando MacOS, per questo caricherò i dati con i seguenti comandi:</p>
<ul>
<li><p>creo un oggetto <strong>path</strong> di tipo stringa di caratteri in cui viene specificato il percorso dove si trova il file da caricare.</p></li>
<li><p>Uso la funzione <em>read.table()</em> dove:</p>
<blockquote class="blockquote">
<p>al parametro <strong>file</strong> è assegnato l’oggetto <strong>path</strong>;</p>
<p>al parametro <strong>header</strong> è assegnato il valore TRUE, in modo tale da leggere la prima riga del file come se fosse l’intestazione delle variabili;</p>
<p>al parametro <strong>sep</strong> è assegnato il valore ‘\t’ .</p>
</blockquote></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>path <span class="ot">=</span> <span class="st">'/Users/giacomobiganzoli/Desktop/Statistica Applicata alla Ricerca Biomedica - R/STAT DESCRITTIVA AP/datiesercitazione.txt'</span> <span class="co"># genero un oggetto che descrive il percorso dove è situato il file</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">read.table</span>(path, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">" "</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a> <span class="co"># utilizzo la funzione read.table per caricare i dati </span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co">#View(data) # visualizzo i dati in modo più chiaro</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="alcune-funzioni-utili-per-avere-informazioni-sul-dataset-caricato" class="level4">
<h4 class="anchored" data-anchor-id="alcune-funzioni-utili-per-avere-informazioni-sul-dataset-caricato">Alcune funzioni utili per avere informazioni sul dataset caricato</h4>
<p>Segue un elenco di alcune funzioni utili una volta che i nostri dati sono stati caricati:</p>
<ul>
<li><p>funzione <em>dim()</em>: serve per ottenere il numero di righe (soggetti e/o misurazioni) e colonne (variabili) del dataset</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 418  46</code></pre>
</div>
</div></li>
<li><p>funzione <em>str()</em>: serve per ottenere velocemente un riassunto su come sono strutturati i dati</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   418 obs. of  46 variables:
 $ ID          : int  1001 1002 1003 1004 1005 1006 1007 1008 1009 1010 ...
 $ entry_date  : chr  "1977-04-01" "1976-01-11" "1978-11-18" "1980-08-13" ...
 $ bili        : num  14.5 1.1 1.4 1.8 3.4 0.8 1 0.3 3.2 12.6 ...
 $ albumin     : num  2.6 4.14 3.48 2.54 3.53 3.98 4.09 4 3.08 2.74 ...
 $ stage       : int  4 3 4 4 3 3 3 3 2 4 ...
 $ protime     : num  12.2 10.6 12 10.3 10.9 11 9.7 11 11 11.5 ...
 $ sex         : chr  "female" "female" "male" "female" ...
 $ age         : num  58.8 56.4 70.1 54.7 38.1 ...
 $ spiders     : chr  "present" "present" "absent" "present" ...
 $ hepatom     : chr  "present" "present" "absent" "present" ...
 $ ascites     : chr  "present" "absent" "absent" "absent" ...
 $ alk.phos    : num  1718 7395 516 6122 671 ...
 $ sgot        : num  137.9 113.5 96.1 60.6 113.2 ...
 $ chol        : int  261 302 176 244 279 248 322 280 562 200 ...
 $ trig        : int  172 88 55 92 72 63 213 189 88 143 ...
 $ platelet    : int  190 221 151 183 136 NA 204 373 251 302 ...
 $ drug        : chr  "placebo" "placebo" "placebo" "placebo" ...
 $ edema       : chr  "edema despite diuretic therapy" "no edema" "edema, no diuretic therapy" "edema, no diuretic therapy" ...
 $ copper      : int  156 54 210 64 143 50 52 52 79 140 ...
 $ date_t1     : chr  "1977-09-30" "1976-07-11" "1979-05-19" "1981-02-11" ...
 $ bili_t1     : num  14.61 1.95 1.72 2.41 3.46 ...
 $ albumin_t1  : num  2.44 4.01 3.31 2.37 3.46 ...
 $ protime_t1  : num  12.1 10.4 12 10.2 10.7 ...
 $ alk.phos_t1 : num  1585 7311 613 6210 485 ...
 $ platelet_t1 : num  198 232 157 186 108 ...
 $ copper_t1   : num  172.4 65 223 78.4 196.9 ...
 $ date_t2     : chr  "1978-04-01" "1977-01-10" "1979-11-18" "1981-08-13" ...
 $ bili_t2     : num  15.74 2.04 1.48 2.92 4.97 ...
 $ albumin_t2  : num  2.39 3.95 3.27 2.39 3.41 ...
 $ protime_t2  : num  12.1 10.3 11.8 10.1 10.9 ...
 $ alk.phos_t2 : num  1774 7256 486 6035 523 ...
 $ platelet_t2 : num  210.1 241.2 164.3 198.5 80.5 ...
 $ copper_t2   : num  185.4 84.8 241.4 86.8 249.1 ...
 $ bili_t3     : num  NA 2.17 2.61 3.6 5.97 ...
 $ albumin_t3  : num  NA 3.73 3.05 2.11 3.34 ...
 $ protime_t3  : num  NA 10.13 11.56 9.84 10.98 ...
 $ alk.phos_t3 : num  NA 7287 409 6183 621 ...
 $ platelet_t3 : num  NA 228.6 165 199.1 83.2 ...
 $ copper_t3   : num  NA 105 263 111 352 ...
 $ fu.days     : int  400 4500 1012 1925 1504 2503 1832 2466 2400 51 ...
 $ status      : int  1 0 1 1 0 1 0 1 1 1 ...
 $ ast.UL      : num  26.3 19.1 17.6 10.8 28.5 ...
 $ gamma.g.g_dL: num  0.765 0.76 1.479 1.368 1.26 ...
 $ ibd_0_1     : int  0 0 0 0 0 0 0 0 0 0 ...
 $ hepB.ant_0_1: int  0 0 0 0 0 0 0 0 0 0 ...
 $ mal.cond_0_1: int  0 0 0 0 0 0 0 0 0 0 ...</code></pre>
</div>
</div></li>
</ul>
<!-- -->
<ul>
<li><p>funzione <em>summary</em>(): serve per ottenere velocemente un riassunto dei dati</p>
<p>❗molto utile quando le variabili nel dataset sono già nel formato corretto</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       ID        entry_date             bili           albumin     
 Min.   :1001   Length:418         Min.   : 0.300   Min.   :1.960  
 1st Qu.:1105   Class :character   1st Qu.: 0.800   1st Qu.:3.243  
 Median :1210   Mode  :character   Median : 1.400   Median :3.530  
 Mean   :1210                      Mean   : 3.221   Mean   :3.497  
 3rd Qu.:1314                      3rd Qu.: 3.400   3rd Qu.:3.770  
 Max.   :1418                      Max.   :28.000   Max.   :4.640  

     stage          protime          sex                 age       
 Min.   :1.000   Min.   : 9.00   Length:418         Min.   :26.28  
 1st Qu.:2.000   1st Qu.:10.00   Class :character   1st Qu.:42.83  
 Median :3.000   Median :10.60   Mode  :character   Median :51.00  
 Mean   :3.024   Mean   :10.73                      Mean   :50.74  
 3rd Qu.:4.000   3rd Qu.:11.10                      3rd Qu.:58.24  
 Max.   :4.000   Max.   :18.00                      Max.   :78.44  
 NA's   :6       NA's   :2                                         
   spiders            hepatom            ascites             alk.phos      
 Length:418         Length:418         Length:418         Min.   :  289.0  
 Class :character   Class :character   Class :character   1st Qu.:  871.5  
 Mode  :character   Mode  :character   Mode  :character   Median : 1259.0  
                                                          Mean   : 1982.7  
                                                          3rd Qu.: 1980.0  
                                                          Max.   :13862.4  
                                                          NA's   :106      
      sgot             chol             trig           platelet    
 Min.   : 26.35   Min.   : 120.0   Min.   : 33.00   Min.   : 62.0  
 1st Qu.: 80.60   1st Qu.: 249.5   1st Qu.: 84.25   1st Qu.:199.8  
 Median :114.70   Median : 309.5   Median :108.00   Median :257.0  
 Mean   :122.56   Mean   : 369.5   Mean   :124.70   Mean   :261.9  
 3rd Qu.:151.90   3rd Qu.: 400.0   3rd Qu.:151.00   3rd Qu.:322.5  
 Max.   :457.25   Max.   :1775.0   Max.   :598.00   Max.   :563.0  
 NA's   :106      NA's   :134      NA's   :136      NA's   :110    
     drug              edema               copper         date_t1         
 Length:418         Length:418         Min.   :  4.00   Length:418        
 Class :character   Class :character   1st Qu.: 41.25   Class :character  
 Mode  :character   Mode  :character   Median : 73.00   Mode  :character  
                                       Mean   : 97.65                     
                                       3rd Qu.:123.00                     
                                       Max.   :588.00                     
                                       NA's   :108                        
    bili_t1           albumin_t1      protime_t1      alk.phos_t1     
 Min.   :-0.00827   Min.   :1.902   Min.   : 8.822   Min.   :  145.3  
 1st Qu.: 1.28905   1st Qu.:3.228   1st Qu.: 9.916   1st Qu.:  828.2  
 Median : 1.96624   Median :3.480   Median :10.462   Median : 1184.6  
 Mean   : 3.44642   Mean   :3.461   Mean   :10.619   Mean   : 1940.2  
 3rd Qu.: 3.85341   3rd Qu.:3.732   3rd Qu.:11.030   3rd Qu.: 1920.8  
 Max.   :28.86766   Max.   :4.455   Max.   :16.986   Max.   :13777.5  
 NA's   :115        NA's   :115     NA's   :115      NA's   :115      
  platelet_t1       copper_t1        date_t2             bili_t2       
 Min.   : 48.63   Min.   : 19.37   Length:418         Min.   : 0.3688  
 1st Qu.:189.43   1st Qu.: 75.64   Class :character   1st Qu.: 1.6899  
 Median :249.66   Median :103.38   Mode  :character   Median : 2.3806  
 Mean   :255.19   Mean   :127.27                      Mean   : 3.6885  
 3rd Qu.:317.14   3rd Qu.:161.36                      3rd Qu.: 3.9851  
 Max.   :564.97   Max.   :611.97                      Max.   :29.6606  
 NA's   :119      NA's   :117                         NA's   :128      
   albumin_t2      protime_t2      alk.phos_t2       platelet_t2   
 Min.   :1.850   Min.   : 8.886   Min.   :  173.9   Min.   : 43.8  
 1st Qu.:3.168   1st Qu.: 9.818   1st Qu.:  753.5   1st Qu.:179.4  
 Median :3.416   Median :10.347   Median : 1161.2   Median :242.7  
 Mean   :3.399   Mean   :10.480   Mean   : 1853.2   Mean   :250.2  
 3rd Qu.:3.661   3rd Qu.:10.896   3rd Qu.: 1865.6   3rd Qu.:314.0  
 Max.   :4.410   Max.   :16.954   Max.   :13738.8   Max.   :581.7  
 NA's   :128     NA's   :128      NA's   :128       NA's   :132    
   copper_t2         bili_t3         albumin_t3      protime_t3    
 Min.   : 34.59   Min.   : 1.178   Min.   :1.819   Min.   : 8.637  
 1st Qu.: 93.12   1st Qu.: 2.556   1st Qu.:3.023   1st Qu.: 9.700  
 Median :144.87   Median : 3.256   Median :3.277   Median :10.107  
 Mean   :155.40   Mean   : 4.530   Mean   :3.252   Mean   :10.303  
 3rd Qu.:192.12   3rd Qu.: 5.052   3rd Qu.:3.499   3rd Qu.:10.714  
 Max.   :491.80   Max.   :29.943   Max.   :4.195   Max.   :17.141  
 NA's   :130      NA's   :140      NA's   :140     NA's   :140     
  alk.phos_t3       platelet_t3       copper_t3         fu.days    
 Min.   :  121.1   Min.   : 44.27   Min.   : 54.14   Min.   :  41  
 1st Qu.:  752.3   1st Qu.:179.13   1st Qu.:116.94   1st Qu.:1093  
 Median : 1082.4   Median :243.87   Median :229.39   Median :1730  
 Mean   : 1867.7   Mean   :251.61   Mean   :216.82   Mean   :1918  
 3rd Qu.: 1878.4   3rd Qu.:315.28   3rd Qu.:285.34   3rd Qu.:2614  
 Max.   :13620.4   Max.   :581.30   Max.   :574.17   Max.   :4795  
 NA's   :140       NA's   :144      NA's   :142                    
     status           ast.UL        gamma.g.g_dL       ibd_0_1       
 Min.   :0.0000   Min.   : 10.24   Min.   :0.7008   Min.   :0.00000  
 1st Qu.:0.0000   1st Qu.: 16.82   1st Qu.:0.9148   1st Qu.:0.00000  
 Median :0.0000   Median : 23.04   Median :1.1605   Median :0.00000  
 Mean   :0.3852   Mean   : 51.71   Mean   :1.2726   Mean   :0.04785  
 3rd Qu.:1.0000   3rd Qu.: 31.42   3rd Qu.:1.4061   3rd Qu.:0.00000  
 Max.   :1.0000   Max.   :395.99   Max.   :3.9975   Max.   :1.00000  

  hepB.ant_0_1      mal.cond_0_1    
 Min.   :0.00000   Min.   :0.00000  
 1st Qu.:0.00000   1st Qu.:0.00000  
 Median :0.00000   Median :0.00000  
 Mean   :0.04785   Mean   :0.04785  
 3rd Qu.:0.00000   3rd Qu.:0.00000  
 Max.   :1.00000   Max.   :1.00000  
</code></pre>
</div>
</div></li>
</ul>
</section>
</section>
<section id="controllo-congruenza-dati" class="level2">
<h2 class="anchored" data-anchor-id="controllo-congruenza-dati">Controllo congruenza dati</h2>
<p>Il dataset caricato si riferisce ai dati dello studio <strong>Mayo Clinic trial on penicillamine in advanced primary biliary cirrhosis</strong> su cui avete lavorato in precedenza. Un breve <em>recap</em>:</p>
<blockquote class="blockquote">
<p><strong>Background:</strong></p>
<p>Primary biliary cirrhosis, a chronic liver disease of unknown cause, is characterized by inflammation and necrosis&nbsp; of intrahepatic bile ducts, cholestesis, cirrhosis, and hepatic failure. The primary pathologic event appears to be destruction of the interlobular bile ducts, which may be mediated by immunologic mechanisms. Increased hepatic copper concentrations, found primarily in advanced disease (stages 3,4) are secondary to progressive intrahepatic colestasis and diminished hepatobiliary clearance of copper. There is no effective treatment for primary biliary cirrhosis, and the medical approach to patients with the disease has been limited to supportive care.</p>
<p>&nbsp;&nbsp; On the basis of the drug’s ability to increase urinary copper excretion and to inhibit tropocollagen synthesis, perhaps thereby diminishing fibrosis, and of its potential immunosuppressive properties, we initiated a long term prospective, double-blind, controlled trial to investigate whether penicillamine (D-penicillamine) is more effective than placebo in patients with primary biliary cirrhosis. Patients with early disease (histologic stage 1,2) will remain in the trial, and their response to penicillamine will be reported later, after longer observation.</p>
</blockquote>
<p>Dopo aver caricato i dati e prima di procedere in qualsiasi tipo di analisi, è fondamentale controllare che tutti i dati siano stati raccolti e importati in modo congruo e che non ci siano errori. Anche se i dati che avete raccolto sono stati scaricati direttamente da REDCap e quindi le possibilità di errori nella compilazione del database erano minime, è comunque necessario verificare che tutti i dati siano corretti.</p>
<p>Facciamo riferimento alle linee guida CONSORT. Siamo al riguadro cerchiato in viola del flowchart riportato nelle linee guida.</p>
<p>Supponete di dover controllare che i criteri di inclusione dello studio siano stati tutti rispettati correttamente.</p>
<p><img src="images/7ff1-01.jpeg" class="img-fluid"></p>
<blockquote class="blockquote">
<p><strong>Eligibility:</strong></p>
<p>People with estabilished disease of more than six months duration, with a serum level of alkaline phosphatase more than 2.5 times the normal level, and a pre-entry liver biopsy considered to be diagnostic of primary biliary cirrhosis.</p>
<p>Reasons for the exclusion from the study:</p>
<p>- serum level of aspartate aminotransferase more than 10 times the normal level</p>
<p>- serum level of aspartate aminotransferase more than 5 times the normal level and gamma globulin more than twice the normal level</p>
<p>- evidence of inflammatory bowel disease</p>
<p>- a malignant condition other than skin cancer</p>
<p>- evidence of extrahepatic obstruction</p>
<p>- use of cholestatic or epatotoxic drugs or excessive alcohol intake</p>
<p>- presence of hepatitis B surface antigen</p>
</blockquote>
<p>I soggetti che sono stati inclusi nello studio avranno specificato per la variabile relativa al farmaco assegnato un valore di ‘D-penicillamine’ o ‘placebo’. I soggetti non inclusi nello studio avranno un valore della variabile uguale a ‘not randomized’. Ma quanti soggetti sono stati assegnati a D-penicillamine, quanti a placebo e quanti non randomizzati? Ddobbiamo considerare la variabile relativa all’assegnazione del farmaco. Ed utilizzare la funzione <em>table()</em> per generare una tabella con le frequenze assolute.</p>
<p>❗E’ buona norma aggiungere alla tabella dei ‘margini’ dove viene riportata la somma delle frequenze assolute. Per aggiungere i margini utilizziamo la funzione <em>addmargins()</em></p>
<ul>
<li><p>La variabile relativa all’assegnazione del farmaco è la variabile <strong>drug.</strong> Per ottenere il nome di tutte le variabili presenti nel dataset considero la funzione <em>colnames().</em> [1]</p></li>
<li><p>Per richiamare la variabile <strong>drug</strong> dal dataset non faccio altro che richiamare il nome del dataset (data) seguito dal simbolo $ seguito dal nome della variabile. [2]</p></li>
<li><p>Per generare una tabella coi margini utilizzo la funzione table, seguita dalla funzione addmargins(). Ricorda che si possono concatenare le funzioni <a href="#sec-bonus">Section&nbsp;18.1.1</a>![3]</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [1]</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data) <span class="co"># uso la funzione colnames() per vedere i nomi delle colonne: la variabile drug è quella relativa al farmaco</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ID"           "entry_date"   "bili"         "albumin"      "stage"       
 [6] "protime"      "sex"          "age"          "spiders"      "hepatom"     
[11] "ascites"      "alk.phos"     "sgot"         "chol"         "trig"        
[16] "platelet"     "drug"         "edema"        "copper"       "date_t1"     
[21] "bili_t1"      "albumin_t1"   "protime_t1"   "alk.phos_t1"  "platelet_t1" 
[26] "copper_t1"    "date_t2"      "bili_t2"      "albumin_t2"   "protime_t2"  
[31] "alk.phos_t2"  "platelet_t2"  "copper_t2"    "bili_t3"      "albumin_t3"  
[36] "protime_t3"   "alk.phos_t3"  "platelet_t3"  "copper_t3"    "fu.days"     
[41] "status"       "ast.UL"       "gamma.g.g_dL" "ibd_0_1"      "hepB.ant_0_1"
[46] "mal.cond_0_1"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co">#[2]</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>drug <span class="co"># richiamo la variabile drug </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "placebo"         "placebo"         "placebo"         "placebo"        
  [5] "D-penicillamine" "D-penicillamine" "D-penicillamine" "D-penicillamine"
  [9] "placebo"         "D-penicillamine" "D-penicillamine" "D-penicillamine"
 [13] "D-penicillamine" "D-penicillamine" "placebo"         "D-penicillamine"
 [17] "D-penicillamine" "placebo"         "placebo"         "D-penicillamine"
 [21] "D-penicillamine" "placebo"         "D-penicillamine" "placebo"        
 [25] "D-penicillamine" "D-penicillamine" "D-penicillamine" "D-penicillamine"
 [29] "D-penicillamine" "D-penicillamine" "D-penicillamine" "D-penicillamine"
 [33] "D-penicillamine" "placebo"         "D-penicillamine" "D-penicillamine"
 [37] "placebo"         "D-penicillamine" "placebo"         "placebo"        
 [41] "placebo"         "D-penicillamine" "placebo"         "D-penicillamine"
 [45] "D-penicillamine" "placebo"         "D-penicillamine" "D-penicillamine"
 [49] "D-penicillamine" "placebo"         "D-penicillamine" "placebo"        
 [53] "placebo"         "placebo"         "placebo"         "D-penicillamine"
 [57] "placebo"         "placebo"         "placebo"         "placebo"        
 [61] "D-penicillamine" "D-penicillamine" "D-penicillamine" "D-penicillamine"
 [65] "placebo"         "placebo"         "D-penicillamine" "placebo"        
 [69] "placebo"         "placebo"         "D-penicillamine" "D-penicillamine"
 [73] "D-penicillamine" "placebo"         "placebo"         "placebo"        
 [77] "D-penicillamine" "placebo"         "placebo"         "D-penicillamine"
 [81] "placebo"         "placebo"         "placebo"         "D-penicillamine"
 [85] "D-penicillamine" "placebo"         "placebo"         "D-penicillamine"
 [89] "placebo"         "placebo"         "D-penicillamine" "placebo"        
 [93] "placebo"         "placebo"         "D-penicillamine" "placebo"        
 [97] "D-penicillamine" "placebo"         "D-penicillamine" "D-penicillamine"
[101] "D-penicillamine" "placebo"         "D-penicillamine" "placebo"        
[105] "D-penicillamine" "placebo"         "D-penicillamine" "placebo"        
[109] "D-penicillamine" "placebo"         "placebo"         "D-penicillamine"
[113] "placebo"         "D-penicillamine" "D-penicillamine" "placebo"        
[117] "placebo"         "placebo"         "placebo"         "placebo"        
[121] "D-penicillamine" "placebo"         "placebo"         "placebo"        
[125] "D-penicillamine" "placebo"         "D-penicillamine" "placebo"        
[129] "placebo"         "D-penicillamine" "D-penicillamine" "placebo"        
[133] "D-penicillamine" "D-penicillamine" "placebo"         "placebo"        
[137] "placebo"         "placebo"         "D-penicillamine" "placebo"        
[141] "placebo"         "D-penicillamine" "D-penicillamine" "D-penicillamine"
[145] "D-penicillamine" "D-penicillamine" "placebo"         "D-penicillamine"
[149] "placebo"         "D-penicillamine" "placebo"         "placebo"        
[153] "placebo"         "placebo"         "D-penicillamine" "D-penicillamine"
[157] "D-penicillamine" "placebo"         "D-penicillamine" "D-penicillamine"
[161] "D-penicillamine" "D-penicillamine" "placebo"         "D-penicillamine"
[165] "placebo"         "D-penicillamine" "placebo"         "D-penicillamine"
[169] "D-penicillamine" "placebo"         "placebo"         "D-penicillamine"
[173] "placebo"         "placebo"         "D-penicillamine" "placebo"        
[177] "D-penicillamine" "placebo"         "D-penicillamine" "D-penicillamine"
[181] "placebo"         "placebo"         "D-penicillamine" "D-penicillamine"
[185] "placebo"         "placebo"         "D-penicillamine" "placebo"        
[189] "D-penicillamine" "placebo"         "D-penicillamine" "placebo"        
[193] "D-penicillamine" "placebo"         "placebo"         "placebo"        
[197] "placebo"         "D-penicillamine" "placebo"         "D-penicillamine"
[201] "D-penicillamine" "placebo"         "D-penicillamine" "D-penicillamine"
[205] "placebo"         "placebo"         "placebo"         "placebo"        
[209] "D-penicillamine" "D-penicillamine" "D-penicillamine" "D-penicillamine"
[213] "placebo"         "D-penicillamine" "D-penicillamine" "placebo"        
[217] "D-penicillamine" "placebo"         "D-penicillamine" "placebo"        
[221] "D-penicillamine" "D-penicillamine" "placebo"         "placebo"        
[225] "placebo"         "D-penicillamine" "placebo"         "D-penicillamine"
[229] "placebo"         "D-penicillamine" "D-penicillamine" "placebo"        
[233] "placebo"         "D-penicillamine" "D-penicillamine" "placebo"        
[237] "placebo"         "D-penicillamine" "placebo"         "placebo"        
[241] "D-penicillamine" "placebo"         "D-penicillamine" "placebo"        
[245] "D-penicillamine" "placebo"         "placebo"         "D-penicillamine"
[249] "placebo"         "D-penicillamine" "placebo"         "placebo"        
[253] "placebo"         "placebo"         "D-penicillamine" "placebo"        
[257] "placebo"         "placebo"         "D-penicillamine" "D-penicillamine"
[261] "D-penicillamine" "D-penicillamine" "D-penicillamine" "D-penicillamine"
[265] "D-penicillamine" "placebo"         "placebo"         "placebo"        
[269] "D-penicillamine" "placebo"         "D-penicillamine" "placebo"        
[273] "D-penicillamine" "placebo"         "placebo"         "placebo"        
[277] "D-penicillamine" "D-penicillamine" "D-penicillamine" "placebo"        
[281] "placebo"         "D-penicillamine" "D-penicillamine" "D-penicillamine"
[285] "placebo"         "placebo"         "placebo"         "D-penicillamine"
[289] "placebo"         "placebo"         "placebo"         "D-penicillamine"
[293] "D-penicillamine" "placebo"         "placebo"         "D-penicillamine"
[297] "placebo"         "D-penicillamine" "placebo"         "D-penicillamine"
[301] "D-penicillamine" "placebo"         "D-penicillamine" "placebo"        
[305] "D-penicillamine" "D-penicillamine" "D-penicillamine" "placebo"        
[309] "D-penicillamine" "placebo"         "placebo"         "D-penicillamine"
[313] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[317] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[321] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[325] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[329] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[333] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[337] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[341] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[345] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[349] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[353] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[357] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[361] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[365] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[369] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[373] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[377] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[381] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[385] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[389] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[393] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[397] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[401] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[405] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[409] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[413] "not randomized"  "not randomized"  "not randomized"  "not randomized" 
[417] "not randomized"  "not randomized" </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">#[3]</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">addmargins</span>(<span class="fu">table</span>(data<span class="sc">$</span>drug, <span class="at">useNA =</span> <span class="st">'always'</span>)) <span class="co"># tabella per frequenze assolute farmaco</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
D-penicillamine  not randomized         placebo            &lt;NA&gt;             Sum 
            154             106             158               0             418 </code></pre>
</div>
</div>
<p><strong>BONUS</strong>!</p>
<p>Per poter calcolare velocemente le frequenze relative per ogni categoria di farmaco assegnato, possiamo utilizzare la funzione <em>prop.table().</em> Questa funzione vuole come argomento la tabella che avete appena generato e automaticamente calcola le proporzioni.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(data<span class="sc">$</span>drug))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
D-penicillamine  not randomized         placebo 
      0.3684211       0.2535885       0.3779904 </code></pre>
</div>
</div>
<p>Ora, di tutti gli ID presenti nel dataset, dobbiamo estrarre solo quelli che sono stati inclusi nello studio. Per fare ciò consideriamo i seguenti comandi:</p>
<ul>
<li>al vettore relativo agli ID <strong>data$ID</strong> filtro, attraverso l’utilizzo delle parentesi quadre, solamente quelli associati a dei soggetti che hanno <strong>data$drug</strong> diverso (<strong>!=</strong>) a ‘not randomized’. Questi ID vengono salvati in un nuovo vettore <strong>ids.rand</strong></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>ids.rand <span class="ot">=</span> data<span class="sc">$</span>ID[data<span class="sc">$</span>drug <span class="sc">!=</span> <span class="st">'not randomized'</span>] <span class="co"># genero un vettore con solamente gli ID dei inclusi (drug == 'not randomized')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Ora che ho salvato tutti gli ID dei soggetti inclusi nello studio nel vettore <strong>ids.rand</strong>, posso ridurre il dataset intero per ottenerne uno dove sono presenti solo i soggetti inclusi. Ovvero, mantengo nel dataset, solamente le righe dei soggetti che hanno un ID <strong>presente (%in%)</strong> nel vettore <strong>ids.rand</strong>. Questo dataset ridotto viene salvato come <strong>inclusi</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>inclusi <span class="ot">=</span> data[data<span class="sc">$</span>ID <span class="sc">%in%</span> ids.rand, ] <span class="co"># filtro i soggetti che hanno ID presente nel vettore ids.not</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(inclusi) <span class="co"># vedo se il numero di righe corrisponde ai 312 soggetti inclusi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 312  46</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(inclusi)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Un’altra funzione più semplice da utilizzare è la funzione <em>subset()</em></p>
<p>Ora non ci resta che considerare <strong>se i criteri di inclusione si applicano ai soggetti nel dataset ‘inclusi’</strong></p>
<blockquote class="blockquote">
<p>- serum level of aspartate aminotransferase more than 10 times the normal level</p>
<p><a href="https://www.urmc.rochester.edu/encyclopedia/content.aspx?contenttypeid=167&amp;contentid=aspartate_transaminase">Normal ranges</a> for AST are:&nbsp;</p>
<ul>
<li><p><strong>Men:</strong>&nbsp;14 to 20 units/L&nbsp;</p></li>
<li><p><strong>Women:</strong>&nbsp;10 to 36 units/L&nbsp;</p></li>
</ul>
</blockquote>
<p>Per fare ciò, nella funzione <em>table()</em> inserisco le seguenti condizioni:</p>
<blockquote class="blockquote">
<p>aspartate aminotransferase (AST) minore o uguale a (<strong>&lt;=</strong>) 200 se contemporaneamente (<strong>&amp;</strong>) il soggetto è (<strong>==</strong>) maschio oppure ( <strong>|</strong> ) aspartate aminotransferase (AST) minore o uguale a (<strong>&lt;=</strong>) 360 se contemporaneamente (<strong>&amp;</strong>) il soggetto è (<strong>==</strong>) femmina</p>
</blockquote>
<p>❗ Il simbolo ‘==’ viene utilizzato per dire ‘equivalente a’, il simbolo ‘=’ viene utilizzato per assegnare e generare nuovi oggetti.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(inclusi<span class="sc">$</span>ast.UL <span class="sc">&lt;=</span> <span class="dv">200</span> <span class="sc">&amp;</span> inclusi<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">'male'</span> <span class="sc">|</span> </span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>        inclusi<span class="sc">$</span>ast.UL <span class="sc">&lt;=</span> <span class="dv">360</span> <span class="sc">&amp;</span> inclusi<span class="sc">$</span>sex <span class="sc">==</span><span class="st">'female'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
TRUE 
 312 </code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>- serum level of aspartate aminotransferase more than 5 times the normal level and gamma globulin more than twice the normal level</p>
<p><a href="https://www.ucsfhealth.org/medical-tests/protein-electrophoresis---serum#:~:text=Gamma%20globulin%3A%200.7%20to%201.6,7%20to%2016%20g%2FL">Normal</a> value ranges are:</p>
<ul>
<li>Gamma globulin: 0.7 to 1.6 g/dL or 7 to 16 g/L</li>
</ul>
</blockquote>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(inclusi<span class="sc">$</span>ast.UL <span class="sc">&lt;=</span> <span class="dv">100</span> <span class="sc">&amp;</span> inclusi<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">'male'</span> <span class="sc">&amp;</span> inclusi<span class="sc">$</span>gamma.g.g_dL <span class="sc">&lt;=</span> <span class="fl">3.2</span> <span class="sc">|</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>        inclusi<span class="sc">$</span>ast.UL <span class="sc">&lt;=</span> <span class="dv">180</span> <span class="sc">&amp;</span> inclusi<span class="sc">$</span>sex <span class="sc">==</span><span class="st">'female'</span>  <span class="sc">&amp;</span> inclusi<span class="sc">$</span>gamma.g.g_dL <span class="sc">&lt;=</span> <span class="fl">3.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
TRUE 
 312 </code></pre>
</div>
</div>
<p>Ora tocca a voi!</p>
<blockquote class="blockquote">
<p><br>
- evidence of inflammatory bowel disease (<strong>ibd_0_1</strong>)</p>
<p>- a malignant condition other than skin cancer (<strong>mal.con_0_1</strong>)</p>
<p>- evidence of extrahepatic obstruction (<strong>extra.hep_0_1</strong>)</p>
<p>- use of cholestatic or epatotoxic drugs or excessive alcohol intake (<strong>ex_alch_0_1</strong>)</p>
<p>- presence of hepatitis B surface antigen (<strong>cholest_epatotoxic</strong>)</p>
</blockquote>
</section>
<section id="homework" class="level2">
<h2 class="anchored" data-anchor-id="homework">Homework 📚</h2>
<p>Provate a scrivere un programma per individuare quali sono le motivazioni di non inclusione nello studio dei soggetti ‘not randomized’ e a quanti soggetti corrispondono le seguenti motivazioni:</p>
<blockquote class="blockquote">
<p>- serum level of aspartate aminotransferase more than 10 times the normal level</p>
<p>- serum level of aspartate aminotransferase more than 5 times the normal level and gamma globulin more than twice the normal level</p>
<p>- evidence of inflammatory bowel disease</p>
<p>- a malignant condition other than skin cancer</p>
<p>- evidence of extrahepatic obstruction</p>
<p>- use of cholestatic or epatotoxic drugs or excessive alcohol intake</p>
<p>- presence of hepatitis B surface antigen</p>
</blockquote>
<p>Dovreste creare una tabella di questo tipo:</p>
<table class="table">
<colgroup>
<col style="width: 59%">
<col style="width: 14%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Motivazione</th>
<th>Numero di soggetti non inclusi</th>
<th>Frequenza relativa (sul numero totale dei non inclusi)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>serum level of aspartate aminotransferase more than 10 times the normal level</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>serum level of aspartate aminotransferase more than 5 times the normal level and gamma globulin more than twice the normal level</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>a malignant condition other than skin cancer</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>evidence of extrahepatic obstruction</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>use of cholestatic or epatotoxic drugs or excessive alcohol intake</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>presence of hepatitis B surface antigen</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>